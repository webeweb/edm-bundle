# Resources/config/services.yml
services:

    wbw.edm.event_listener.document:
        class:     WBW\Bundle\EDMBundle\EventListener\DocumentEventListener
        arguments: ["@doctrine.orm.entity_manager", "@wbw.edm.manager.storage"]
        public:    true
        tags:
            - { name: "kernel.event_listener", event: "wbw.edm.event.document.post_delete",  method: "onDeleteDocument" }
            - { name: "kernel.event_listener", event: "wbw.edm.event.document.pre_download", method: "onDownloadDocument" }
            - { name: "kernel.event_listener", event: "wbw.edm.event.document.post_move",    method: "onMoveDocument" }
            - { name: "kernel.event_listener", event: "wbw.edm.event.document.post_new",     method: "onNewDocument" }

    wbw.edm.manager.storage:
        class:     WBW\Bundle\EDMBundle\Manager\StorageManager
        arguments: ["@logger"]
        public:    true

    wbw.edm.provider.datatables.document:
        class:     WBW\Bundle\EDMBundle\Provider\DataTables\DocumentDataTablesProvider
        arguments: ["@router", "@translator", "@wbw.bootstrap.twig.extension.css.button"]
        public:    true
        calls:
            - ["setDocumentIconProvider", ["@wbw.edm.provider.document_icon"]]
        tags:
            - { name: "wbw.jquery.datatables.provider" }

    wbw.edm.provider.document_icon:
        class:  WBW\Bundle\EDMBundle\Provider\DocumentIconProvider
        public: true
